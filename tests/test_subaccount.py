import pytest
from fastapi.testclient import TestClient
from app.main import app

client = TestClient(app)

def test_create_subaccount():
    #ì•„ë˜ë¡œ test ë°ì´í„° ìƒì„±ëœê±° x -> services/subaccount.pyì˜ ë°ì´í„°ë¡œ ê°•ì œ ë³€í™˜ë¨
    subaccount_data = {
        "worker_uid": 120,
        "worker_id": "test_worker_01",
        "worker_enpw": "testpassword123",
        "is_del": "N",
        "worker_name": "í…ŒìŠ¤íŠ¸ ì‘ì—…ì",
        "worker_cellphone": "010-1234-5678",
        "department": "ê°œë°œíŒ€"
    }
    response = client.post(
        "/api/v1/subaccount/",
        json=subaccount_data
    )
    print("\nğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ")
    print(" âœ… test_create_subaccount / Status Code:", response.status_code)
    print(" âœ… Response JSON \n", response.json())
    assert response.status_code == 201


def test_read_subaccount():
    response = client.get("/api/v1/subaccount/120")

    print("\nğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ")
    print(" âœ… test_read_subaccount / Status Code:", response.status_code)
    print(" âœ… Response JSON \n", response.json())
    assert response.status_code == 200



def test_update_subaccount():
    subaccount_data = {
        "worker_uid": 121,
        "worker_id": "test_worker_01",
        "worker_enpw": "testpassword123",
        "is_del": "N",
        "worker_name": "í…ŒìŠ¤íŠ¸ ì‘ì—…ì",
        "worker_cellphone": "010-1234-5678",
        "department": "ê°œë°œíŒ€"
    }
    response = client.patch(
        "/api/v1/subaccount/121",
        json=subaccount_data
    )
    print(
        "\nğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ")
    print(" âœ… test_update_subaccount / Status Code:", response.status_code)
    print(" âœ… Response JSON \n", response.json())
    # print("\nğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ")
    assert response.status_code == 200

def test_delete_subaccount():
    response = client.delete("/api/v1/subaccount/121")

    print("\nğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ")
    print(" âœ… test_delete_subaccount / Status Code:", response.status_code)
    # print("\nğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ğŸŸª ")
    assert response.status_code == 204